# ============================================
# LLM 服务配置
# ============================================
LLM_PROVIDER=aliyun

# 阿里云配置（必填）
DASHSCOPE_API_KEY=your_dashscope_api_key_here
ALIYUN_MODEL_NAME=qwen-turbo
ALIYUN_TEMPERATURE=0.3

# DeepSeek 配置（备用，LLM_PROVIDER=deepseek 时使用）
# DEEPSEEK_API_KEY=your_deepseek_api_key_here
# DEEPSEEK_BASE_URL=https://api.deepseek.com
# DEEPSEEK_MODEL_NAME=deepseek-chat

# ============================================
# 服务配置
# ============================================
PORT=3000
NODE_ENV=development
CORS_ORIGIN=*
LOG_LEVEL=info

# ============================================
# 向量数据库配置
# ============================================
VECTOR_DB_PATH=./data/lancedb
VECTOR_DIMENSION=1536

# ============================================
# PostgreSQL 数据库配置（会话存储）
# ============================================
# 数据库类型: postgres | sqlite
# - postgres: 使用 PostgreSQL（推荐生产环境）
# - sqlite: 使用 SQLite（开发环境，无需安装数据库）
DB_TYPE=sqlite

# === PostgreSQL 配置（DB_TYPE=postgres 时使用） ===
# 本地开发示例
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=postgres
# DB_PASSWORD=your_password
# DB_NAME=aivista

# Supabase 云数据库示例
# 从 Supabase Dashboard > Settings > Database 获取
# DB_HOST=db.zhynqlwcouelovadfxru.supabase.co
# DB_PORT=5432
# DB_USER=postgres
# DB_PASSWORD=your_supabase_db_password
# DB_NAME=postgres

# === SQLite 配置（DB_TYPE=sqlite 时使用，开发环境推荐） ===
# SQLite 数据库文件路径（相对于项目根目录）
DB_DATABASE=./data/aivista.db

# === 通用数据库配置 ===
# 是否在开发环境自动同步表结构（生产环境必须设为 false）
DB_SYNCHRONIZE=true

# 是否启用数据库日志
DB_LOGGING=true

# 是否使用 SSL 连接（Supabase 需要）
DB_SSL=false

# ============================================
# TypeORM 配置
# ============================================
# 这些配置会根据 DB_TYPE 自动生成，通常不需要手动设置
# TYPEORM_CONNECTION=postgres
# TYPEORM_HOST=localhost
# TYPEORM_PORT=5432
# TYPEORM_USERNAME=postgres
# TYPEORM_PASSWORD=your_password
# TYPEORM_DATABASE=aivista
# TYPEORM_SYNCHRONIZE=true
# TYPEORM_LOGGING=true
# TYPEORM_ENTITIES=dist/**/*.entity{.ts,.js}
# TYPEORM_MIGRATIONS=dist/migrations/*.js
# TYPEORM_MIGRATIONS_DIR=src/migrations

# ============================================

# ============================================
# RAG 检索配置
# ============================================
RAG_MIN_SIMILARITY=0.4
RAG_SEARCH_LIMIT=3
# 性能配置
# ============================================
WORKFLOW_TIMEOUT=60
CRITIC_PASS_THRESHOLD=0.7
CRITIC_USE_LLM=false
MAX_RETRY_COUNT=3

PLANNER_TIMEOUT=10
RAG_TIMEOUT=5
EXECUTOR_TIMEOUT=5
CRITIC_TIMEOUT=8
MAX_CONCURRENT_SESSIONS=50
MAX_QUEUE_SIZE=100
CACHE_TTL=3600

# ============================================
# 安全配置
# ============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100
SESSION_TIMEOUT_MINUTES=30

# ============================================
# 图片生成服务配置
# ============================================
# 是否使用真实图片生成服务（默认 false，使用 Mock）
USE_REAL_IMAGE_SERVICE=false

# DashScope API 配置
# 基础 URL（支持不同地域）
# 中国内地: https://dashscope.aliyuncs.com/api/v1
# 新加坡: https://dashscope-intl.aliyuncs.com/api/v1
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/api/v1

# 图片生成 API endpoint
DASHSCOPE_IMAGE_ENDPOINT=/services/aigc/multimodal-generation/generation

# 默认图片生成模型（用于Agent工作流，当用户未指定preferredModel时使用）
# 可选值: qwen-image | qwen-image-max | qwen-image-plus | z-image-turbo
ALIYUN_IMAGE_MODEL=qwen-image-plus

# 图片生成尺寸（默认 1024x1024）
ALIYUN_IMAGE_SIZE=1024x1024

# 图片生成参数
ALIYUN_IMAGE_PROMPT_EXTEND=true  # z-image-turbo 使用 false
ALIYUN_IMAGE_WATERMARK=false
